<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Expense</title>
  <link rel="stylesheet" href="/static/style.css?v={{ range(100000, 999999) | random }}" />
  <link rel="manifest" href="/static/manifest.json" />
  <meta name="theme-color" content="#111827">
  <script src="/static/preload.js?v={{ range(100000, 999999) | random }}"></script>
</head>

<body>
  <button id="install-btn" class="btn install" style="display: none;"> {{ icons.get("pwa_install", "ğŸ“²") }} ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</button>
  <button id="hamburger-menu-btn" class="small-btn"> â˜° </button>
  <div id="menu-container">
    <form method="get" action="/"><button type="submit" id="home-btn" class="small-btn"> {{ icons.get("home", "ğŸ ") }} ãƒ›ãƒ¼ãƒ ã€€ </button></form>
    <form method="get" action="/asset_management"><button type="submit" id="asset-management-btn" class="small-btn"> {{ icons.get("asset_management", "ğŸ“ˆ") }} è³‡ç”£ç®¡ç† </button></form>
    <button id="theme-toggle" class="small-btn"> {% if theme == "dark" %} {{ icons.get("light_theme", "â˜€ï¸") }} {% else %} {{ icons.get("dark_theme", "ğŸŒ™") }} {% endif %} ãƒ†ãƒ¼ãƒã€€ </button>
  </div>
  <div class="container">
    <h1> {{ icons.get("title", "") }} Asset Management </h1>

    <div class="card">
      <h3 class="collapsible-trigger" data-key="asset-report">
        <span> {{ icons.get("asset_portfolio", "ğŸ“Š") }} ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª </span>
        <span class="collapsible-toggle"></span>
      </h3>
      <div id="asset-report-container" class="collapsible-content">
        <div class="asset-summary-list">
          <div class="asset-summary-content">
            <span> è³‡ç”£ç·é¡ </span>
            <span class="asset-summary-details"> {{today.year}}å¹´{{today.month}}æœˆ{{today.day}}æ—¥ {{"{:02d}".format(today.hour)}}:{{"{:02d}".format(today.minute)}}æ™‚ç‚¹ </span>
          </div>
          <div class="asset-summary-display"> {{asset_summary.total}} </div>
          <div class="asset-summary-details">
            <span> å‰æ—¥æ¯” </span>
            <span
              {% if "Â¥ 0" in asset_summary.change %}
                class=""
              {% elif "+Â¥" in asset_summary.change %}
                class="asset-color-up asset-up"
              {% else %}
                class="asset-color-down asset-down"
              {% endif %}
            > {{asset_summary.change}} </span>
          </div>
          <br>
          <div class="asset-summary-content">
            <span> å«ã¿ç›Š </span>
            <div class="asset-summary-display-sub">
              <span
                {% if "Â¥ 0" in asset_summary.profit %}
                  class=""
                {% elif "+Â¥" in asset_summary.profit %}
                  class="asset-color-up"
                {% else %}
                  class="asset-color-down"
                {% endif %}
              > {{asset_summary.profit}} </span>
            </div>
          </div>
          <div class="asset-summary-details">
            <span> å†… ETF å«ã¿ç›Š </span>
            <span
              {% if "Â¥ 0" in asset_summary.profit_etf %}
                class=""
              {% elif "+Â¥" in asset_summary.profit_etf %}
                class="asset-color-up"
              {% else %}
                class="asset-color-down"
              {% endif %}
            > {{asset_summary.profit_etf}} </span>
          </div>
          <div class="asset-summary-details">
            <span> æç›Šç‡ </span>
            <span
              {% if "Â¥ 0" in asset_summary.roi %}
                class=""
              {% elif "+" in asset_summary.roi %}
                class="asset-color-up"
              {% else %}
                class="asset-color-down"
              {% endif %}
            > {{asset_summary.roi}} </span>
          </div>
          <br>
          <div class="asset-summary-content">
            <span> ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ : USD/JPY </span>
            <span class="asset-summary-display-sub"> {{asset_summary.usdjpy}} </span>
          </div>
        </div>
        <div class="graph-container">
          {{ plotlyjs | safe }}
          <hr>
          <div id="asset-pie-chart-container" class="loading"><div class="spinner"></div></div>
          <hr>
          <div id="asset-waterfall-chart-container" class="loading"><div class="spinner"></div></div>
          <hr>
          <div id="asset-monthly-history-chart-container" class="loading"><div class="spinner"></div></div>
        </div>
      </div>
    </div>

    <div class="card">
      <h3 class="collapsible-trigger" data-key="asset-record">
        <span> {{ icons.get("asset_list", "ğŸ“") }} è³‡ç”£ä¸€è¦§ </span>
        <span class="collapsible-toggle"></span>
      </h3>
      <a href="{{ gspread_url }}" class="link-spread"> {{ icons.get("link", "ğŸ”—") }} ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’é–‹ã </a>
      <div id="asset-record-container" class="collapsible-content">
        <div class="search-wrapper">
          <input type="text" id="search-input" placeholder="{{ icons.get('search', 'ğŸ”') }} è³‡ç”£ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°" />
          <button id="clear-search" type="button">âœ•</button>
        </div>
        <div class="table-container">
          <table>
            <colgroup>
              <col>
              <col>
              <col>
              <col>
              <col>
              <col>
              <col>
              <col>
              <col>
              <col>
            </colgroup>
            <thead>
              <tr>
                <th>éŠ˜æŸ„</th>
                <th>ä¿æœ‰æ•°</th>
                <th>å–å¾—å˜ä¾¡(Â¥)</th>
                <th>ç¾åœ¨å€¤($)</th>
                <th>ç¾åœ¨å€¤(Â¥)</th>
                <th>æŠ•è³‡é¡(Â¥)</th>
                <th>è©•ä¾¡é¡(Â¥)</th>
                <th>å«ã¿ç›Š(Â¥)</th>
                <th>ä¿æœ‰æ¯”ç‡(%)</th>
                <th>è©•ä¾¡æç›Šç‡(%)</th>
              </tr>
            </thead>
            <tbody>
              {% for item in asset_items %}
              <tr>
                <td>{{ item.ticker }}</td>
                <td>{{ item.num }}</td>
                <td>Â¥ {{ "{:,.0f}".format(item.acquisition) }}</td>
                <td>$ {{ "{:,}".format(item.price_dollar) }}</td>
                <td>Â¥ {{ "{:,.0f}".format(item.price) }}</td>
                <td>Â¥ {{ "{:,.0f}".format(item.invest_amount) }}</td>
                <td>Â¥ {{ "{:,.0f}".format(item.valuation) }}</td>
                <td>Â¥ {{ "{:,.0f}".format(item.profit) }}</td>
                <td>{{ "{:.2f}".format(item.weight) }}%</td>
                <td>{{ "{:.2f}".format(item.roi) }}%</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
  <div id="loader" class="overlay" style="display: none;">
    <div class="spinner"></div>
  </div>
</body>
<script type="module" src="/static/js/main.js"></script>

</html>
